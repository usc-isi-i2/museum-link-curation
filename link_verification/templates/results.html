<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Link Curation Results</title>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <link rel="stylesheet" type="text/css" href="static/css/style.css">
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="static/images/main.ico">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Raleway" />
    
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js"></script>

    <script>
    $(document).ready(function(){ 
        $('#rstable').DataTable();
        
        $("#download").click(function(e){
            e.preventDefault()
            var tag_list = [];
            tag_list.push($('input[name="museums"]:checked').map(
                function () {return this.value;}).get());
            var status3 = [];
            status3.push($('input[name="status3"]:checked').map(
                function () {return this.value;}).get());
            var status4 = [];
            status4.push($('input[name="status4"]:checked').map(
                function () {return this.value;}).get());
            var status5 = [];
            status5.push($('input[name="status5"]:checked').map(
                function () {return this.value;}).get());
            
            var userObj = new Object();
            userObj.data = {"tags":tag_list[0],"s3":status3[0],"s4":status4[0],"s5":status5[0]};
            json_data = JSON.stringify(userObj);
            console.log(json_data);

            var sv = '{{server}}'.concat("/v1/results");
                $.ajax({
                    method: 'PUT',
                    url: sv,
                    data: json_data,
                    contentType: 'application/json',
                    success: function(data){
                        console.log("File Created!");
                        window.location.href = "/download";
                    }
                });
        });
    });
    </script>
</head>
<body>
  <div id = "header">{% include 'header_search.html' %}</div>
  
  <div class="container" style="margin-top:10px;>
    <div class="table table-responsive">
        <table class="table table-hover">
        <col width="10">
        <col width="100">
        <col width="20">
        <col width="20">
        <col width="20">
        <tr>
            <th> </td> 
            <th> Museum </th>
            <th> Match </th>
            <th> Unmatch </th>
            <th> Not sure </th>
        </tr>
        {% for tag in museums %}
        <tr>
            <td></td>
            <td>
                <input id={{tag}} type="checkbox" name="museums" value={{tag}} />
                <label for={{tag}}>{{tag}}</label>
            </td>
            <td>
                <input id=status3 type="checkbox" name="status3" value={{tag}} />
                <label for=status3></label>
            </td>
            <td>
                <input id=status4 type="checkbox" name="status4" value={{tag}} />
                <label for=status4></label>
            </td>
            <td>
                <input id=status5 type="checkbox" name="status5" value={{tag}} />
                <label for=status5></label>
            </td>
        </tr>
        {% endfor %}
        </table>
        <form name ="download_data">
            <button id = "download" type="submit" class="btn btn-primary btn-lg" style = "float: right; margin-right: 50%; margin-top: 1%; margin-bottom: 2%">download</button>
        </form>
    </div>
  </div>
   
    <div style = "width:100%; height:100vh;">
    
  <div class="container">
    <div class="table table-responsive">
            <table id="rstable" class="table table-hover">
            <col width="270">
            <col width="270">
            <col width="80">
            <col width="80">
            <col width="80">
            <thead>
                <tr>
                    <th>URI1</th>
                    <th>URI2</th>
                    <th>Match</th>
                    <th>Unmatch</th>
                    <th>Not sure</th>
               </tr>
            </thead>
            <tbody>
            {% for match in data['matched'] %}
            <tr>
              <td><a href={{match['uri1']}}> {{match['uri1']}} </td>
              <td><a href={{match['uri2']}}> {{match['uri2']}} </td>
              <td style="text-align: center;">{{ match['Yes']}}</td>
              <td style="text-align: center;">{{ match['No']}}</td>
              <td style="text-align: center;">{{ match['notSure']}}</td>
            </tr>
            {% endfor %}
            {% for match in data['unmatched'] %}
            <tr>
              <td><a href={{match['uri1']}}> {{match['uri1']}} </td>
              <td><a href={{match['uri2']}}> {{match['uri2']}} </td>
              <td style="text-align: center;">{{ match['Yes']}}</td>
              <td style="text-align: center;">{{ match['No']}}</td>
              <td style="text-align: center;">{{ match['notSure']}}</td>
            </tr>
            {% endfor %}
            </tbody>
            </table>
      </div>
  </div>
  </div>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Link Curation Results</title>
    
    <meta charset="UTF-8"/>
    <meta name="generator" content="Bootply" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    
    <link rel="stylesheet" type="text/css" href="../static/css/style.css"/>
    <link href="static/css/bootstrap.min.css" rel="stylesheet"/>    
    <link rel="shortcut icon" type="image/x-icon" href="../static/images/main.ico"/>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway" />
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script>
    $(document).ready(function(){ 
        
        $("#download").click(function(e){
            e.preventDefault()
            var tag_list = [];
            tag_list.push($('input[name="museums"]:checked').map(
                function () {return this.value;}).get());
            var status3 = [];
            status3.push($('input[name="status3"]:checked').map(
                function () {return this.value;}).get());
            var status4 = [];
            status4.push($('input[name="status4"]:checked').map(
                function () {return this.value;}).get());
            var status5 = [];
            status5.push($('input[name="status5"]:checked').map(
                function () {return this.value;}).get());
            
            var userObj = new Object();
            userObj.data = {"tags":tag_list[0],"s3":status3[0],"s4":status4[0],"s5":status5[0]};
            json_data = JSON.stringify(userObj);
            console.log(json_data);

            var sv = '{{server}}'.concat("/export");
                $.ajax({
                    method: 'PUT',
                    url: sv,
                    data: json_data,
                    contentType: 'application/json',
                    success: function(data){
                        console.log("File Created!");
                        window.location.href = "/download";
                    }
                });
        });
    });
    </script>
    <style>
    #download{
            position: relative;
            margin: 10px 20px;
        }
    
    </style>
</head>
<body style="background-color: white;">
  <div id = "header">{% include 'header.html' %}</div>
  <br><br><br>
  
  <div class="container" style="background-color: white; height=100%">
    <div class="table table-responsive" style="background-color: white;">
        <table class="table table-hover">
        <col width="10">
        <col width="100">
        <col width="20">
        <col width="20">
        <col width="20">
        <tr>
            <th> </td> 
            <th> Museum </th>
            <th> Match </th>
            <th> Unmatch </th>
            <th> Not sure </th>
        </tr>
        {% for tag in museums %}
        <tr>
            <td></td>
            <td>
                <input id={{tag}} type="checkbox" name="museums" value={{tag}} />
                <label for={{tag}}>{{tag}}</label>
            </td>
            <td>
                <input id=status3 type="checkbox" name="status3" value={{tag}} />
                <label for=status3></label>
            </td>
            <td>
                <input id=status4 type="checkbox" name="status4" value={{tag}} />
                <label for=status4></label>
            </td>
            <td>
                <input id=status5 type="checkbox" name="status5" value={{tag}} />
                <label for=status5></label>
            </td>
        </tr>
        {% endfor %}
        </table>
        <form name ="download_data">
            <button id = "download" type="submit" class="btn btn-primary btn-lg" style = "float: right; margin-right: 50%;">Export</button>
        </form>
    </div>
  </div>
  <div id = "footer">{% include 'footer.html' %}</div>
</body>
</html>
